/* —— 右列宽度不变 —— */
.sidebar-col{ flex:0 0 25%; min-width:300px; max-width:380px; margin-left:auto; }

/* —— 强制隐藏任何目录卡（防止旧文件再渲染） —— */
.directory-card, .directory-float { display: none !important; }

/* —— 人物徽章，不再用大卡 —— */
.persona{ position: sticky; top: 90px; }
.persona-head{ display:flex; align-items:center; gap:14px; margin-bottom:8px; }
.persona .avatar{ width:72px; height:72px; border-radius:50%; object-fit:cover; border:3px solid var(--soft); }
.persona .name{ font-weight:700; font-size:16px; color:var(--ink-1); }
.persona .desc{ margin-top:4px; font-size:13px; color:var(--ink-3); line-height:1.55; }

/* —— 让首页变“瀑布流网格” —— */
.is-masonry{ padding-top:6px; }
.masonry{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap:24px;
  align-items:start;
}
.m-item{ transition: transform .25s ease, box-shadow .2s ease; }

/* 卡片（保持你喜欢的风格） */
.card{
  background:#fff; border-radius:16px; border:1px solid rgba(0,0,0,.06);
  box-shadow:0 2px 10px rgba(0,0,0,.06);
  transition: box-shadow .2s ease, transform .2s ease, background-color .2s ease;
}
.card:hover{ box-shadow:0 10px 26px rgba(0,0,0,.12); transform: translateY(-2px); }
.post-card{ padding:24px; }
.post-card a{ color:inherit; text-decoration:none; }
.post-card a:hover{ text-decoration:none; }
.post-card .post-title{ margin:0 0 6px; font-size:24px; font-weight:700; letter-spacing:.2px; }
.post-card .post-subtitle{ margin:0 0 12px; font-size:16px; color:#4b5563; }
.post-card .excerpt{ color:#374151; line-height:1.78; margin:0; }
.post-card .post-meta{ margin-top:10px; font-size:13px; color:#6b7280; }
.post-card .dot{ margin:0 6px; opacity:.6; }
.post-card .tag{
  display:inline-block; padding:2px 8px; margin-right:6px; border-radius:999px;
  font-size:12px; color:#1f2937; background:#f0f5f1; border:1px solid rgba(113,135,113,.25);
}

/* —— 彻底隐藏任何“最新文章/目录”旧卡片 —— */
.directory-card, .directory-float, .latest-posts-card { display:none !important; }

/* —— 书签式右侧文章轨道（保留1条，默认露出约1/3） —— */
.bookmark-rail{
  position: fixed; right: 0; top: 120px;
  height: 70vh; width: 320px;
  padding: 14px 0; overflow: hidden; z-index: 5;
}
.bookmark-rail .bm-ul{ margin:0; padding:0; list-style:none; transition: transform .25s ease; will-change: transform; }
.bm-item{ height:56px; margin:2px 0; position:relative; }
.bm-link{ position:relative; display:block; height:100%; text-decoration:none; color:inherit; }
.bm-tab{
  position:absolute; top:0; right:0; width:22px; height:100%;
  background: rgba(47,111,128,.12);
  border-radius:12px 0 0 12px; border:1px solid rgba(47,111,128,.18);
  display:flex; align-items:center; justify-content:center;
  writing-mode: vertical-rl; text-orientation: mixed;
  font-size:12px; letter-spacing:.05em; color:#2f6f80; overflow:hidden; user-select:none;
}
.bm-panel{
  position:absolute; top:0; right:-260px; width:260px; height:100%;
  background:#fff; border:1px solid rgba(0,0,0,.06);
  border-radius:14px 0 0 14px; box-shadow:0 10px 30px rgba(0,0,0,.10);
  padding:10px 12px; display:flex; align-items:center; justify-content:space-between;
  transform: translateX(-86px); transition: transform .18s ease, box-shadow .18s ease; pointer-events:none;
}
.bm-title{ font-size:14px; font-weight:600; color:#1f2937; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:200px; }
.bm-date{ font-size:12px; color:#6b7280; margin-left:8px; }
.bm-item:hover .bm-panel{ transform: translateX(-260px); box-shadow:0 16px 40px rgba(31,107,123,.18); }

/* 小屏回落：书签条变普通列表，瀑布流改单列 */
@media (max-width: 992px){
  .masonry{ grid-template-columns: 1fr; }
  .bookmark-rail{ position: static; width:auto; height:auto; padding:0; margin:12px 0; }
  .bm-tab{ display:none; }
  .bm-panel{ position:relative; right:auto; width:100%; border-radius:14px; transform:none !important; pointer-events:auto; }
}

/* 去掉老主题悬停下划线 */
.post-preview a, .post-preview a:hover{ text-decoration:none !important; }

/* —— 书签式右侧文章轨道（保持露出 1/3） —— */
.bookmark-rail{ position: fixed; right: 0; top: 120px; height: 70vh; width: 320px; padding:14px 0; overflow:hidden; z-index:5; }
.bookmark-rail .bm-ul{ margin:0; padding:0; list-style:none; transition: transform .25s ease; will-change: transform; }
.bm-item{ height:56px; margin:2px 0; position:relative; }
.bm-link{ position:relative; display:block; height:100%; text-decoration:none; color:inherit; }
.bm-tab{
  position:absolute; top:0; right:0; width:22px; height:100%;
  background: rgba(47,111,128,.12);
  border-radius:12px 0 0 12px; border:1px solid rgba(47,111,128,.18);
  display:flex; align-items:center; justify-content:center;
  writing-mode: vertical-rl; text-orientation: mixed;
  font-size:12px; letter-spacing:.05em; color:#2f6f80; overflow:hidden; user-select:none;
}
.bm-panel{
  position:absolute; top:0; right:-260px; width:260px; height:100%;
  background:#fff; border:1px solid rgba(0,0,0,.06);
  border-radius:14px 0 0 14px; box-shadow:0 10px 30px rgba(0,0,0,.10);
  padding:10px 12px; display:flex; align-items:center; justify-content:space-between;
  transform: translateX(-86px); transition: transform .18s ease, box-shadow .18s ease; pointer-events:none;
}
.bm-title{ font-size:14px; font-weight:600; color:#1f2937; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:200px; }
.bm-date{ font-size:12px; color:#6b7280; margin-left:8px; }
.bm-item:hover .bm-panel{ transform: translateX(-260px); box-shadow:0 16px 40px rgba(31,107,123,.18); }

/* 小屏回落 */
@media (max-width: 992px){
  .bookmark-rail{ position: static; width:auto; height:auto; padding:0; margin:12px 0; }
  .bm-tab{ display:none; }
  .bm-panel{ position:relative; right:auto; width:100%; border-radius:14px; transform:none !important; pointer-events:auto; }
  .persona{ position: static; }
}

/* ========= 卡片风基础（保留你的风格并加强） ========= */
:root{
  --brand-green:#718771; --brand-blue:#2F6F80;
  --ink-3:#6b7280;
}

/* 瀑布流间距更大，更通透 */
.masonry{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 28px;                      /* 原来是 24，可按喜好调 24~36 */
  align-items: start;
}

/* 卡片统一风格 */
.card{
  background:#fff;
  border-radius:18px;
  border:1px solid rgba(0,0,0,.05);
  box-shadow:0 6px 18px rgba(0,0,0,.06);
  transition: box-shadow .22s ease, transform .22s ease, background-color .22s ease, filter .22s ease;
  will-change: transform, box-shadow, filter;
}

/* 悬停：轻微抬起 + 提亮，但不移动布局 */
.card:hover{
  box-shadow:0 14px 34px rgba(0,0,0,.12);
  transform: translateY(-2px) rotateZ(0.15deg);
  filter: saturate(1.02);
}

/* 点击：轻微按压 */
.card:active{
  transform: translateY(0) scale(0.995);
  box-shadow:0 8px 20px rgba(0,0,0,.10);
}

/* 文章卡内容（沿用你原先的样式） */
.post-card{ padding:24px; }
.post-card a{ color:inherit; text-decoration:none; }
.post-card a:hover{ text-decoration:none; }
.post-card .post-title{ margin:0 0 6px; font-size:24px; font-weight:700; letter-spacing:.2px; }
.post-card .post-subtitle{ margin:0 0 12px; font-size:16px; color:#4b5563; }
.post-card .excerpt{ color:#374151; line-height:1.78; margin:0; }
.post-card .post-meta{ margin-top:10px; font-size:13px; color:var(--ink-3); }
.post-card .tag{
  display:inline-block; padding:2px 8px; margin-right:6px; border-radius:999px;
  font-size:12px; color:#1f2937; background:#f0f5f1; border:1px solid rgba(113,135,113,.25);
}

/* ========= 悬停“轻微晃动一次”动画 ========= */
/* 只执行一次：通过 JS 给卡片加 .wobble-once 类名，动画完成后类名被移除并打上已晃动标记 */
@keyframes dz-wobble {
  0%   { transform: translateY(-2px) rotateZ(0deg); }
  40%  { transform: translateY(-2px) rotateZ(0.6deg); }
  70%  { transform: translateY(-2px) rotateZ(-0.4deg); }
  100% { transform: translateY(-2px) rotateZ(0.12deg); }
}
.wobble-once{
  animation: dz-wobble .28s ease both;
  box-shadow:0 16px 40px rgba(0,0,0,.14);
}

/* ========= 点击“脉冲”反馈 ========= */
@keyframes dz-pulse {
  0%   { transform: scale(1); box-shadow:0 14px 34px rgba(0,0,0,.12); }
  50%  { transform: scale(0.995); box-shadow:0 10px 24px rgba(0,0,0,.10); }
  100% { transform: scale(1); box-shadow:0 14px 34px rgba(0,0,0,.12); }
}
.pulse-once{ animation: dz-pulse .18s ease; }

/* ========= 书签式目录条保持不变（摘要） ========= */
.bookmark-rail{ position:fixed; right:0; top:120px; height:70vh; width:320px; padding:14px 0; overflow:hidden; z-index:5; }
.bm-item{ height:56px; margin:2px 0; position:relative; }
.bm-tab{ position:absolute; top:0; right:0; width:22px; height:100%; background:rgba(47,111,128,.12);
  border:1px solid rgba(47,111,128,.18); border-radius:12px 0 0 12px; display:flex; align-items:center; justify-content:center;
  writing-mode: vertical-rl; text-orientation:mixed; font-size:12px; color:#2f6f80; }
.bm-panel{ position:absolute; top:0; right:-260px; width:260px; height:100%; background:#fff; border:1px solid rgba(0,0,0,.06);
  border-radius:14px 0 0 14px; box-shadow:0 10px 30px rgba(0,0,0,.10); padding:10px 12px; display:flex; align-items:center; justify-content:space-between;
  transform: translateX(-86px); transition: transform .18s ease, box-shadow .18s ease; pointer-events:none; }
.bm-item:hover .bm-panel{ transform: translateX(-260px); box-shadow:0 16px 40px rgba(31,107,123,.18); }

@media (max-width: 992px){
  .masonry{ grid-template-columns: 1fr; gap:18px; }
  .bookmark-rail{ position:static; width:auto; height:auto; padding:0; margin:12px 0; }
  .bm-tab{ display:none; }
  .bm-panel{ position:relative; right:auto; width:100%; border-radius:14px; transform:none !important; pointer-events:auto; }
}

/* 彻底屏蔽旧版“最新文章卡片/目录卡”的遗留 */
.directory-card, .directory-float, .latest-posts-card { display:none !important; }
