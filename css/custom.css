/* =========================================================
   Dasein — Custom UI (cleaned)
   保留功能：卡片风 + Masonry + 右侧书签目录条 + special-card
   ========================================================= */

/* ---- 全局变量 ---- */
:root{
  --brand-green:#718771;
  --brand-blue:#2F6F80;
  --ink-1:#111;
  --ink-2:#333;
  --ink-3:#6b7280;
  --soft:#eef2ef;
  --card-bg:#fff;
}

/* ---- 旧版目录/最新文章卡：彻底隐藏（防重复渲染） ---- */
.directory-card,
.directory-float,
.latest-posts-card { display:none !important; }

/* =========================================================
   1) 瀑布流（不对齐 Masonry）
   - 将首页容器加类 .masonry（index.html 已处理）
   ========================================================= */
.is-masonry{ padding-top:6px; }

/* 列宽自适应、天然不对齐 */
.masonry{
  column-width: 340px;     /* 目标列宽，随屏幕自动分列 */
  column-gap: 28px;        /* 列间距 */
}

/* 让卡片在 Masonry 中不要被拆开，并控制行距 */
.masonry > .card{
  break-inside: avoid;
  display: block;
  margin: 0 0 28px;
}

/* 小屏改为更紧凑 */
@media (max-width: 992px){
  .masonry{
    column-width: auto;
    column-gap: 18px;
  }
}

/* =========================================================
   2) 卡片风基础（统一视觉）
   ========================================================= */
.card{
  background: var(--card-bg);
  border-radius: 18px;
  border: 1px solid rgba(0,0,0,.05);
  box-shadow: 0 6px 18px rgba(0,0,0,.06);
  transition: box-shadow .22s ease, transform .22s ease, background-color .22s ease, filter .22s ease;
  will-change: transform, box-shadow, filter;
}

/* 悬停：轻微抬起 + 微微提亮 */
.card:hover{
  box-shadow: 0 14px 34px rgba(0,0,0,.12);
  transform: translateY(-2px) rotateZ(0.15deg);
  filter: saturate(1.02);
}

/* 点击：轻微按压 */
.card:active{
  transform: translateY(0) scale(0.995);
  box-shadow: 0 8px 20px rgba(0,0,0,.10);
}

/* 文章卡内容 */
.post-card{ padding:24px; }
.post-card a{ color:inherit; text-decoration:none; }
.post-card a:hover{ text-decoration:none; }
.post-card .post-title{ margin:0 0 6px; font-size:24px; font-weight:700; letter-spacing:.2px; }
.post-card .post-subtitle{ margin:0 0 12px; font-size:16px; color:#4b5563; }
.post-card .excerpt{ color:#374151; line-height:1.78; margin:0; }
.post-card .post-meta{ margin-top:10px; font-size:13px; color:var(--ink-3); }
.post-card .tag{
  display:inline-block; padding:2px 8px; margin-right:6px; border-radius:999px;
  font-size:12px; color:#1f2937; background:#f0f5f1; border:1px solid rgba(113,135,113,.25);
}

/* 兼容：老主题里 .post-preview 的下划线行为 */
.post-preview a, .post-preview a:hover{ text-decoration:none !important; }

/* ---- 悬停“轻微晃动一次”动画（由 JS 加/撤类 wobble-once） ---- */
@keyframes dz-wobble {
  0%   { transform: translateY(-2px) rotateZ(0deg); }
  40%  { transform: translateY(-2px) rotateZ(0.6deg); }
  70%  { transform: translateY(-2px) rotateZ(-0.4deg); }
  100% { transform: translateY(-2px) rotateZ(0.12deg); }
}
.wobble-once{
  animation: dz-wobble .28s ease both;
  box-shadow:0 16px 40px rgba(0,0,0,.14);
}

/* 点击脉冲反馈（由 JS 加/撤类 pulse-once） */
@keyframes dz-pulse {
  0%   { transform: scale(1);     box-shadow:0 14px 34px rgba(0,0,0,.12); }
  50%  { transform: scale(0.995); box-shadow:0 10px 24px rgba(0,0,0,.10); }
  100% { transform: scale(1);     box-shadow:0 14px 34px rgba(0,0,0,.12); }
}
.pulse-once{ animation: dz-pulse .18s ease; }

/* =========================================================
   3) 作者 special-card（卡片化的人物页）
   - 顶部留白更小；移除主题可能注入的分隔线
   ========================================================= */
.post-card.special-card{
  padding:14px 20px 18px;
  border-top:none !important;
}
.special-card hr,
.special-card .hr,
.special-card .split-line,
.post-card.special-card::before,
.post-card.special-card::after,
.post-card.special-card .post-title::before{
  display:none !important; content:none !important; border:0 !important;
}

/* 头部：头像 + 标题 */
.special-card .sc-head{
  display:flex; align-items:center; gap:12px;
  margin:2px 0 6px;
}
.special-card .avatar{
  width:60px; height:60px; border-radius:50%;
  object-fit:cover; border:3px solid var(--soft);
}
.special-card .sc-title{
  margin:0; font-size:26px; font-weight:800; letter-spacing:.2px;
}
.special-card .sc-sub{ margin-top:4px; color:#374151; line-height:1.6; }

/* 链接行 */
.special-card .sc-links{
  margin-top:10px; font-size:14px; line-height:1.5; color:#2f6f80;
}
.special-card .sc-links a{ color:#2f6f80; text-decoration:none; }
.special-card .sc-links a:hover{ text-decoration:underline; }
.special-card .dot{ margin:0 8px; color:#9aa1aa; }

/* =========================================================
   4) 右侧书签式目录条（仅此一份）
   - 默认露出约 1/3，悬停完全滑出
   ========================================================= */
.bookmark-rail{
  position: fixed;
  right: 0;
  top: 120px;
  height: 70vh;
  width: 320px;            /* 轨道总占位（滑出后的宽度） */
  padding: 14px 0;
  overflow: hidden;
  z-index: 30;
}
.bm-ul{
  margin:0; padding:0; list-style:none;
  transition: transform .25s ease;
  will-change: transform;
}
.bm-item{ height:56px; margin:2px 0; position:relative; }
.bm-link{ display:block; height:100%; text-decoration:none; color:inherit; position:relative; }

/* 常态可见的窄条 */
.bm-tab{
  position:absolute; top:0; right:0; width:22px; height:100%;
  background:rgba(47,111,128,.12);
  border:1px solid rgba(47,111,128,.18);
  border-radius:12px 0 0 12px;
  display:flex; align-items:center; justify-content:center;
  writing-mode:vertical-rl; text-orientation:mixed;
  font-size:12px; color:#2f6f80; overflow:hidden;
}

/* 滑出面板（默认露出约 1/3） */
.bm-panel{
  position:absolute; top:0; right:-260px; width:260px; height:100%;
  pointer-events:none;
  background:#fff; border:1px solid rgba(0,0,0,.06);
  border-radius:14px 0 0 14px;
  box-shadow:0 10px 30px rgba(0,0,0,.10);
  padding:10px 12px;
  display:flex; align-items:center; justify-content:space-between;
  transform: translateX(-86px);
  transition: transform .18s ease, box-shadow .18s ease;
}
.bm-item:hover .bm-panel{
  transform: translateX(-260px);
  box-shadow:0 16px 40px rgba(31,107,123,.18);
}
.bm-title{
  font-size:14px; font-weight:600; max-width:200px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.bm-date{ font-size:12px; color:#6b7280; margin-left:8px; }

/* 小屏回落：书签条变普通列表，不固定在右侧 */
@media (max-width: 992px){
  .bookmark-rail{
    position: static; width:auto; height:auto; padding:0; margin:12px 0;
  }
  .bm-tab{ display:none; }
  .bm-panel{
    position:relative; right:auto; width:100%;
    border-radius:14px; transform:none !important; pointer-events:auto;
  }
}
